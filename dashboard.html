<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <title>Dashboard</title>
    <style>
      body {
        background-color: skyblue;
      }
      .form-label {
        padding-top: 20px;
      }
      .form-control, .form-select {
        box-shadow: 0px 0px 5px rgba(0, 123, 255, 0.5);
      }
      .addButton {
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }
      .btn-primary {
        transition: background-color 0.3s ease, transform 0.2s ease;
      }
      .btn-primary:hover {
        background-color: #0056b3;
        transform: translateY(-2px);
      }
      .rounded-table {
        border-radius: 10px;
        overflow: hidden; /* Ensures rounded corners are applied */
      }
      .btn-delete {
        background-color: red;
        border-radius: 5px;
      }
      .btn-delete {
        transition: background-color 0.3s ease, transform 0.2s ease;
      }
      .btn-delete:hover {
        background-color: #ff6666;
        transform: translateY(-2px);
      }
      .errorMessage {
        text-align: center;
      }
      
    </style>
  </head>

  <body>
    <div class="container">
      <div class="row">
        <h1 class="text-center">Welcome, "Username"</h1>
      </div>
      <div class="row">
        <div class="col-4">
          <label for="gameType" class="form-label">Game Type</label>
          <select name="gameType" id="gameType" class="form-select">
            <option value="Texas Hold'em">Texas Hold'em</option>
            <option value="Omaha">Omaha</option>
            <option value="Seven-Card Stud">Seven-Card Stud</option>
            <option value="Five-Card Draw">Five-Card Draw</option>
            <option value="Razz">Razz</option>
          </select>
        </div>
        <div class="col-4">
          <label for="stakes" class="form-label">Stakes</label>
          <select name="stakes" id="stakes" class="form-select">
            <option value=".05/.10">.05/.10</option>
            <option value=".10/.20">.10/.20</option>
            <option value=".25/.50">.25/.50</option>
            <option value=".50/1">.50/1</option>
            <option value="1/2">1/2</option>
            <option value="1/3">1/3</option>
            <option value="2/5">2/5</option>
          </select>
        </div>
        <div class="col-4">
          <label for="timePlayed" class="form-label">Time Played</label> 
          <input type="text" id="timePlayed" name="timePlayed" class="form-control" placeholder="Ex: 2.5 (in hours)" />
        </div>
      </div>
      <div class="row">
        <div class="col-4">
          <label for="buyIn" class="form-label">Buy In</label> 
          <input type="text" id="buyIn" name="buyIn" class="form-control" placeholder="Ex: 50.00" />
        </div>
        <div class="col-4">
          <label for="cashOut" class="form-label">Cash Out</label> 
          <input type="text" id="cashOut" name="cashOut" class="form-control" placeholder="Ex: 47.50" />
        </div>
        <div class="col-4 addButton">
          <button class="btn btn-primary" id="addSession">Add Session</button>
        </div>
      </div>
      <div class="row mt-4">
        <table class="table table-striped rounded-table">
          <thead>
            <tr>
              <th>Game Type</th>
              <th>Stakes</th>
              <th>Net Profit</th>
              <th>Net Profit/Hour</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="sessionTable">
            <!-- Session rows will be dynamically added here -->
          </tbody>
        </table>
      </div>
    </div>

    <script>
      document.getElementById('addSession').addEventListener('click', function () {
        // Get input values
        const gameType = document.getElementById('gameType').value;
        const stakes = document.getElementById('stakes').value;
        const timePlayedInput = document.getElementById('timePlayed').value;
        const buyInInput = document.getElementById('buyIn').value;
        const cashOutInput = document.getElementById('cashOut').value;

        const timePlayed = parseFloat(timePlayedInput);
        const buyIn = parseFloat(buyInInput);
        const cashOut = parseFloat(cashOutInput);

        if(isNaN(timePlayed) || timePlayed < 0){
          showError('Time played must be a positive number');
          return;
        }
        if(isNaN(buyIn) || buyIn < 0){
          showError('Buy-In must be a non-negative number.');
          return;
        }
        if(isNaN(cashOut) || cashOut < 0) {
          showError('Cash-Out must be a non-negative number.');
          return;
        }
        // Calculate net profit and profit per hour
        const netProfit = cashOut - buyIn;
        const profitPerHour = timePlayed > 0 ? netProfit / timePlayed : 0; // ternary operator (same as if-else)

        // Add a new row to the table
        const table = document.getElementById('sessionTable');
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
          <td>${gameType}</td>
          <td>${stakes}</td>
          <td>${netProfit.toFixed(2)}</td>
          <td>${profitPerHour.toFixed(2)}</td>
          <td><button class="btn-delete">X</button></td>
        `;
        table.appendChild(newRow);
        newRow.querySelector('.btn-delete').addEventListener('click', function () {
          newRow.remove();
        });

        // Clear input fields
        document.getElementById('timePlayed').value = '';
        document.getElementById('buyIn').value = '';
        document.getElementById('cashOut').value = '';
        clearError();
      });

      function showError(message){
        let errorDiv = document.getElementById('errorMessage');
        // creating new error element if it doesn't exist and styling it
        if (!errorDiv) {
          errorDiv = document.createElement('div');
          errorDiv.id = 'errorMessage';
          errorDiv.style.color = 'red';
          errorDiv.style.marginTop = '10px';
          document.querySelector('.container').prepend(errorDiv);
        }
        errorDiv.textContent = message;
      }

      function clearError(){
        const errorDiv = document.getElementById('errorMessage');
        if (errorDiv) {
          errorDiv.textContent = '';
        }
      }
    </script>
  </body>
</html>
